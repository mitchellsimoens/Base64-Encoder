Ext.ns("Base64");Base64.App=Ext.extend(Ext.Component,{applyTo:"drop-div",cls:"filedrag",html:"Drag Image Here",afterRender:function(){var b=this,a=b.getEl();Base64.App.superclass.afterRender.call(b);a.on("dragover",b.dragover,b);a.on("drop",b.drop,b)},dragover:function(a){a.stopPropagation();a.preventDefault()},drop:function(g){g.stopEvent();var h=g.browserEvent,d=h.dataTransfer,c=d.files,f=c.length,b=0,a;for(;b<f;b++){a=c[b];this.handleFile(a)}},handleFile:function(b){var c=/image.*/,a=new FileReader();if(!b.type.match(c)){return}a.onload=this.handleFileLoad;a.readAsDataURL(b)},handleFileLoad:function(b){var a=new Base64.TextArea({value:b.target.result});Base64.images.add(a);Base64.images.doLayout()}});Base64.TextArea=Ext.extend(Ext.form.TextArea,{anchor:"100%",height:120,afterRender:function(){var b=this,c=b.value,a=b.label;Base64.TextArea.superclass.afterRender.call(b);a.update("<img src='"+c+"' width='140'>")}});Ext.onReady(function(){Base64.app=new Base64.App();Base64.images=new Ext.Container({renderTo:"mainbody",layout:"form",labelWidth:150})});